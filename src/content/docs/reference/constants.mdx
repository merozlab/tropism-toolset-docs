---
title: Constants Module API
description: API reference for physical constant calculation functions.
---
import Equation from '../../../components/Equation.astro';

Functions for calculating physical constants (γ, β) and fitting growth dynamics.

## Physical Constants

### `get_gamma()`

Calculate proprioceptive sensitivity from steady-state time.

**Signature:**
```python
get_gamma(Tc: float, period: float = 900.0) -> float
```

**Parameters:**
- `Tc` (float): Steady state time in frames
- `period` (float, optional): Time per frame in seconds. Default: 900 (15 minutes)

**Returns:**
- `float`: Gamma (γ) in s⁻¹

**Formula:**
<Equation>

$$\gamma = \frac{1}{T_c \cdot \Delta t}$$

</Equation>

**Example:**
```python
from tropism_toolset import get_gamma

Tc = 120  # frames
minutes_per_frame = 15
period = minutes_per_frame * 60  # seconds

gamma = get_gamma(Tc, period)
print(f"Gamma: {gamma:.6f} s⁻¹")
print(f"Characteristic time: {1/gamma:.2f} s")
```
---

### `get_beta()`

Calculate gravitropic sensitivity from Lc and gamma.

**Signature:**
```python
get_beta(Lc: float, gamma: float) -> float
```

**Parameters:**
- `Lc` (float): Convergence length in meters
- `gamma` (float): Proprioceptive sensitivity in s⁻¹

**Returns:**
- `float`: Beta (β) in m⁻¹

**Formula:**
<Equation>

$$\beta = \frac{\gamma}{L_c}$$

</Equation>

**Example:**
```python
from tropism_toolset import get_beta

Lc = 0.042  # m
gamma = 2.3e-4  # s⁻¹

beta = get_beta(Lc, gamma)
print(f"Beta: {beta:.4f} m⁻¹")
```

---

## Growth Analysis

### `fit_growth_rate()`

Fit linear model to length data and extract growth rate (dL/dt).

**Signature:**
```python
fit_growth_rate(
    data: pd.DataFrame,
    *,
    display: bool = False,
    save_path: str | None = None,
    title: str = "Growth Rate",
    slope_label: str = "growth rate",
) -> float
```

**Parameters:**
- `data` (pd.DataFrame): DataFrame with exactly 2 columns:
    - First column: temporal values with unit in name (e.g., 'time (s)' or 'frame')
    - Second column: length values with unit in name (e.g., 'length (m)', 'length (mm)')
- `display` (bool, optional): When True, display the linear fit. Default: False
- `save_path` (str or None, optional): If provided, save the plot to this path.
- `title` (str, optional): Plot title. Default: "Growth Rate".
- `slope_label` (str, optional): Label for the slope in the plot annotation. Default: "growth rate".

**Returns:**
- `float`: Growth rate (slope of the linear fit) in units derived from column names

**Example:**
```python
from tropism_toolset import fit_growth_rate, get_lengths_from_centerlines

# Get length data with units in column names
length_data = get_lengths_from_centerlines(df, smooth=True)

# Fit growth rate (units automatically determined from column names)
dL_dt = fit_growth_rate(length_data, display=True)
```

---


### `fit_angular_velocity()`

Fit piecewise linear model to angle data and extract angular velocity (dθ/dt).

**Signature:**
```python
fit_angular_velocity(
    data: pd.DataFrame,
    *,
    display: bool = False,
    save_path: str | None = None,
    title: str = "Tip Angular Velocity - Piecewise Linear Fit",
    initial_guess: list | None = None,
    bounds: tuple | None = None,
) -> float
```

**Parameters:**
- `data` (pd.DataFrame): DataFrame with exactly 2 columns:
    - First column: temporal values with unit in name (e.g., 'time (s)' or 'frame')
    - Second column: angle values with unit in name (e.g., 'angle (rad)')
- `display` (bool, optional): When True, display the piecewise fit. Default: False
- `save_path` (str or None, optional): If provided, save the plot to this path.
- `title` (str, optional): Plot title. Default: "Tip Angular Velocity - Piecewise Linear Fit".
- `initial_guess` (list, optional): Initial parameter guess [x0, m1, b1, m2].
- `bounds` (tuple, optional): Parameter bounds.

**Returns:**
- `float`: Angular velocity from phase 1 (slope of first segment) [rad/s or rad/frame]

**Example:**
```python
from tropism_toolset import fit_angular_velocity, get_tip_angles_linear_fit

# Get angle data with units in column names
angle_data = get_tip_angles_linear_fit(df, percent=10)

# Fit angular velocity (units automatically determined from column names)
dtheta_dt = fit_angular_velocity(angle_data, display=True)
```

---


### `fit_angular_velocity_exponential()`

Fit saturating exponential model to angle data and extract initial angular velocity.

**Signature:**
```python
fit_angular_velocity_exponential(
    data: pd.DataFrame,
    *,
    title: str = "Tip Angular Velocity - Saturating Exponential Fit",
    initial_guess: list | None = None,
    bounds: tuple | None = None,
    display: bool = False,
    save_path: str | Path | None = None,
) -> float
```

**Parameters:**
- `data` (pd.DataFrame): DataFrame with exactly 2 columns (temporal, angle)
- `title` (str, optional): Plot title. Default: "Tip Angular Velocity - Saturating Exponential Fit"
- `initial_guess` (list, optional): Initial parameter guess [theta_inf, theta_0, tau].
- `bounds` (tuple, optional): Parameter bounds.
- `display` (bool, optional): When True, display the saturating exponential fit plot. Default: False
- `save_path` (str | Path | None, optional): If provided, save the plot to this path.

**Returns:**
- `float`: Initial angular velocity: (θ_∞ - θ_0)/τ [rad/frame or rad/s]

**Model:**
<Equation>

$$\theta(t) = \theta_\infty - (\theta_\infty - \theta_0)e^{-t/\tau}$$

</Equation>

Initial angular velocity:
<Equation>

$$\frac{d\theta}{dt}\Big|_{t=0} = \frac{\theta_\infty - \theta_0}{\tau}$$

</Equation>

**Example:**
```python
from tropism_toolset import fit_angular_velocity_exponential

# Fit exponential approach to steady state
dtheta_dt = fit_angular_velocity_exponential(
    angle_data,
    display=True
)

print(f"Initial angular velocity: {dtheta_dt:.6e} rad/frame")
```

---

## Chauvet Model Parameters

The Chauvet model quantifies how plants sense inclination rather than force. It defines:
- Δ̃: Relative differential growth parameter
- β̃: Gravitropic sensitivity

### `Chauvet_Delta_tilde()`

Calculate Chauvet Δ̃ parameter from tip angular velocity and growth rate.

**Signature:**
```python
Chauvet_Delta_tilde(
    dtheta_dt: float,
    dL_dt: float,
    R: float = 0.002,
    display: bool = False
) -> float
```

**Parameters:**
- `dtheta_dt` (float): Tip angular velocity in rad/frame
- `dL_dt` (float): Growth rate in m/frame
- `R` (float, optional): Organ radius in meters. Default: 0.002 (2 mm)
- `display` (bool, optional): Show diagnostic info. Default: False

**Returns:**
- `float`: Chauvet Δ̃ parameter (dimensionless)

**Formula:**
<Equation>

$$\tilde{\Delta} = R \times \frac{d\theta/dt}{dL/dt}$$

</Equation>

**Example:**
```python
from tropism_toolset import (
    get_lengths_from_masks,
    get_tip_angles_linear_fit,
    fit_growth_rate,
    fit_angular_velocity,
    Chauvet_Delta_tilde
)

# Calculate growth rate
length_data = get_lengths_from_masks(
    mask_dir='data/masks/',
    R=0.002
)
dL_dt = fit_growth_rate(length_data)

# Calculate tip angular velocity
angle_data = get_tip_angles_linear_fit(data, percent=10)
dtheta_dt = fit_angular_velocity(angle_data)

# Calculate Delta tilde
Delta = Chauvet_Delta_tilde(
    dtheta_dt=dtheta_dt,
    dL_dt=dL_dt,
    R=0.002,
    display=True
)
```

---


### `Chauvet_beta_tilde()`

Calculate Chauvet β̃ gravitropic sensitivity from Δ̃ and plant centerline data.

**Signature:**
```python
Chauvet_beta_tilde(
    Delta_tilde: float,
    data: pd.DataFrame,
    display: bool = False
) -> float
```

**Parameters:**
- `Delta_tilde` (float): Chauvet Δ̃ parameter from `Chauvet_Delta_tilde()`
- `data` (pd.DataFrame): DataFrame with 'x', 'y', 'frame' columns (coordinates in meters)
- `display` (bool, optional): Show diagnostic info. Default: False

**Returns:**
- `float`: Chauvet β̃ gravitropic sensitivity (dimensionless)

**Formula:**
<Equation>

$$\tilde{\beta} = \frac{\tilde{\Delta}}{\sin(\theta_0)}$$

</Equation>

Where θ₀ is the initial base angle from the first frame.

**Example:**
```python
from tropism_toolset import Chauvet_Delta_tilde, Chauvet_beta_tilde

# ... calculate Delta ...

# Then calculate beta tilde
beta = Chauvet_beta_tilde(
    Delta_tilde=Delta,
    data=df,
    display=True
)

print(f"Gravitropic sensitivity (β̃): {beta:.6f}")
```

---

## Bastien Model Parameters

The Bastien model relates bending angle dynamics to growth rate through proprioception.

### `Bastien_gamma_tilde()`

Calculate Bastien γ̃ proprioceptive sensitivity from a calculated beta_tilde and Lc.

**Signature:**
```python
Bastien_gamma_tilde(beta_tilde: float, Lc: float, R: float) -> float
```

**Parameters:**
- `beta_tilde` (float): Chauvet β̃ from `Chauvet_beta_tilde()`
- `Lc` (float): Convergence length in meters
- `R` (float): Organ radius in meters

**Returns:**
- `float`: Bastien γ̃ proprioceptive sensitivity

**Formula:**
<Equation>

$$\tilde{\gamma} = \frac{L_c \cdot \tilde{\beta}}{R}$$

</Equation>

---


### `Bastien_Delta_tilde()`

Calculate Bastien proprioceptive sensitivity parameter Δ from pre-calculated derivatives.

**Signature:**
```python
Bastien_Delta_tilde(
    dtheta_tip_dt: pd.Series,
    dE_dt: pd.Series,
    R: float = 0.002,
    display: bool = False,
    save_path: str | Path | None = None,
) -> float
```

**Parameters:**
- `dtheta_tip_dt` (pd.Series): Rate of change of bending angle (θ_tip - θ_base) in rad/frame
- `dE_dt` (pd.Series): Rate of change of length (growth rate) in m/frame
- `R` (float, optional): Organ radius in meters. Default: 0.002
- `display` (bool, optional): Display diagnostic plot. Default: False
- `save_path` (str | Path | None, optional): Save plot to path.

**Returns:**
- `float`: Bastien proprioceptive sensitivity parameter Δ (dimensionless)

**Model:**
<Equation>

$$\frac{dB}{dt} = \frac{\Delta}{R} \times \frac{dE}{dt}$$

</Equation>

Where B = θ_tip - θ_base is the bending angle.

**Example:**
```python
from tropism_toolset import Bastien_Delta_tilde
from tropism_toolset.geometric_calculations import (
    get_tip_angles_linear_fit,
    get_lengths_from_centerlines
)
from scipy.signal import savgol_filter
import numpy as np
import pandas as pd

# Calculate B(t) = theta_tip(t) - theta_base(t)
tip_angles_df = get_tip_angles_linear_fit(data, percent=10, side='tip')
base_angles_df = get_tip_angles_linear_fit(data, percent=10, side='base')
B = tip_angles_df['angle (rad)'].values - base_angles_df['angle (rad)'].values

# Calculate L(t)
lengths_df = get_lengths_from_centerlines(data)
L = lengths_df['length (m)'].values

# Apply Savitzky-Golay smoothing
B_smoothed = savgol_filter(B, window_length=11, polyorder=2)
L_smoothed = savgol_filter(L, window_length=11, polyorder=2)

# Compute finite differences
dB_dt = np.diff(B_smoothed)
dE_dt = np.diff(L_smoothed)

# Calculate Delta
Delta = Bastien_Delta_tilde(
    pd.Series(dB_dt),
    pd.Series(dE_dt),
    R=0.002,
    display=True
)

print(f"Bastien Δ: {Delta:.6f}")
```

## See Also

- [Fitting Functions](/reference/fitting/) - For underlying fitting algorithms
- [Geometric Calculations](/reference/geometric-calculations/) - For angle and arc length calculations
- [Constants Extraction Guide](/guides/constants-extraction/) - Usage examples