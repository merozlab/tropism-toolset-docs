---
title: Core Concepts
description: Fundamental concepts in plant tropism analysis and the theory behind the toolkit.
---

import Equation from '../../../components/Equation.astro';

This guide introduces the key concepts that underpin the Tropism Toolset.

## Coordinate Systems

### Cartesian Coordinates (x, y)

The raw data from image analysis consists of pixel coordinates:
- **x**: Horizontal position
- **y**: Vertical position
- **frame**: Time point

```python
# Example data structure
   frame    x      y
0      0  245  1088
1      0  246  1076
2      0  248  1064
```

### Arc-Length Coordinates (s, θ)

For analysis, we transform to natural coordinates that follow the centerline:
- **s**: Arc length from the base (cumulative distance along centerline)
- **θ**: Local tangent angle relative to vertical

```python
from tropism_toolset import xy_to_stheta

# Convert DataFrame with x, y, frame columns to s, theta format
s_theta_data = xy_to_stheta(data)
```

This transformation is crucial because gravitropic models are formulated in terms of curvature and angle along the organ.

## Data Requirements

### Centerline Data

Your primary input is a CSV file containing traced centerlines from time-lapse images:

```csv
frame,x,y
0,245.0,1088.0
0,246.2,1076.3
0,248.1,1064.8
...
```

**Requirements:**
- Sequential points ordered from base to tip
- Consistent frame numbering
- Sufficient spatial resolution (recommended: >50 points per organ)

**Data Sources:**
- [SAP (Segmentation App)](https://github.com/merozlab/plant-segmentation-app) - Recommended
- Manual tracing in ImageJ/Fiji
- Custom image processing pipelines

### Mask Data (Optional)

For steady-state detection and growth zone analysis, binary mask images can be used:

```
experiment_masks/
├── 00001_mask.bmp
├── 00002_mask.bmp
├── 00003_mask.bmp
...
```

**Format:**
- Binary BMP images (black background, white organ)
- Sequential numbering with zero-padding
- Same time resolution as centerline data

## Recommended Data Organization

For batch processing and multi-specimen experiments, organize your data following this hierarchical structure:

```
experiment_2024-01-15/          # One experiment run
├── camera_01/                  # Each camera in the setup
│   ├── specimen_A.csv         # Multiple specimens per camera
│   ├── specimen_B.csv
│   └── specimen_C.csv
├── camera_02/
│   ├── specimen_D.csv
│   └── specimen_E.csv
└── camera_03/
    └── specimen_F.csv
```

### Organization Levels

**Experiment directory** (top level)
- Represents a single experimental run or session
- All data collected under the same conditions
- Example: `gravitropism_run_2024-01-15/`

**Camera subdirectories** (middle level)
- One subdirectory per camera in your multi-camera setup
- Allows simultaneous tracking of multiple plants
- Example: `camera_01/`, `camera_02/`, `camera_03/`

**Centerline files** (individual specimens)
- One CSV file per specimen tracked in each camera's field of view
- Multiple specimens can be tracked within a single camera's timelapse
- Example: `specimen_A.csv`, `specimen_B.csv`

### Example: Real Experiment

```
data/
└── arabidopsis_gravitropism_jan2024/
    ├── left_camera/
    │   ├── plant_01_centerlines.csv    # 200 frames × 80 points
    │   ├── plant_02_centerlines.csv
    │   └── plant_03_centerlines.csv
    ├── center_camera/
    │   ├── plant_04_centerlines.csv
    │   └── plant_05_centerlines.csv
    └── right_camera/
        ├── plant_06_centerlines.csv
        ├── plant_07_centerlines.csv
        ├── plant_08_centerlines.csv
        └── plant_09_centerlines.csv
```

### Why This Structure?

This organization pattern enables:
- **Batch processing**: Process all specimens across all cameras automatically
- **Experiment tracking**: Keep all related data together
- **Multi-camera support**: Handle complex experimental setups
- **Scalability**: Easily add more cameras or specimens
- **Reproducibility**: Clear structure for sharing and archiving

The toolset's batch processing utilities (like `discover_experiments`) expect this structure and will recursively find all centerline files within it.

## Common Terminology

| Term | Symbol | Units | Description |
|------|--------|-------|-------------|
| Arc length | $s$ | m | Distance along centerline from base |
| Angle | $\theta$ | rad | Tangent angle relative to vertical |
| Curvature | $\kappa$ | m⁻¹ | Rate of change of angle: $\kappa = d\theta/ds$ |
| Convergence length | $L_c$ | m | Characteristic response length |
| Gamma | $\gamma$ | s⁻¹ | Proprioceptive sensitivity |
| Beta | $\beta$ | m⁻¹ | Gravitropic sensitivity |
| Growth rate | $dL/dt$ | m/s | Elongation velocity |
| Angular velocity | $d\theta/dt$ | rad/s | Rate of orientation change |

## Next Steps

Now that you understand the core concepts:

- Understand the [mathematical models](/guides/models/chauvet/) in detail
- Perform [geometric analysis](/guides/geometric-analysis/)
- Extract [physical constants](/guides/constants-extraction/)
